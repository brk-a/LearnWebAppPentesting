#!/usr/bin/bash

# ** aim is to get to level 23
# a programme is running at regular intervals because `cron`
# look in `/etc/cron.d` for configs and more info

cd /etc/cron.d
ls #a lot of cron jobs; focus on cronjob_bandit23
ls -la #cronjob_bandit23 is a regular file with 644 perms
cat cronjob_bandit23 #the job is to run the script `cronjob_bandit23.sh`  on 
#server `bandit23` every min of every hr of every day of every
#month of every weekday. said script is in `/usr/bin/`
cat /usr/bin/cronjob_bandit23.sh #bash file that creates a md5 sum of the
# username, creates a file whose name is said md5 sum  in `/tmp` and stores 
# the contents of `etc/bandit_pass/bandit23` in said file
# there are two args a user must pass: `myname` and `mytarget`
myname=bandit23 #set the first one
echo I am user bandit23 | md5sum | cut -d ' ' -f 1 #set the second one

#copy name of file (the gobbledygook); replace `file-name` below with that
cat /tmp/file-name #found password. copy to clipboard or use xclip
cat /tmp/file-name | xclip

exit #back to our machine

# ** if copied manually
echo p4ssWord > passwd #use the password you copied to clipboard
# ** if used xclip
xclip -o | cat > passwd

sshpass -p $(cat passwd) ssh bandit23@bandit.labs.overthewire.org -p 2220

# command `cron` examines all stored crontabs, checking each command to see
# if it should be run in the current minute
# type `man cron` in terminal and press ENTER