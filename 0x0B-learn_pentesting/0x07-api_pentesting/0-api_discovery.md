# API discovery
* in order to target APIs, you must first be able to find them
* idea is to learn how to uncover the API attack surface of a target using passive and active reconnaissance techniques
* how an API is meant to be consumed will determine how easily it can be found
    - ***public APIs*** are meant to be easily found and used by end-users
        - may be entirely public without authentication or be meant for use by authenticated users
        - authentication for a public API primarily depends on the sensitivity of the data that is handled
        - if a public API only handles public information then there is no need for authentication; in most other instances authentication will be required.
        - are meant to be consumed by end-users: in order to facilitate this, API providers share documentation that serves as an instruction manual for a given API
        - this documentation should be end-user friendly and relatively straightforward to find
    - ***partner APIs*** are intended to be used exclusively by partners of the provider
        - may be harder to find if you are not a partner
        - may be documented but documentation is often limited to the partner
    - ***private APIs*** are intended for use, privately, within an organisation
        - these APIs are often documented less than partner APIS, if at all
        - if any documentation exists it is even harder to find 
* in all instances where API documentation is unavailable, you will need to know how to reverse engineer API requests: we will cover reverse engineering later
* for now, we will focus on detecting APIs and using them as described within discovered documentation
### webAPI indicators
* APIs meant for consumer use are meant to be easily discovered
    * typically, the API provider will market their API to developers who want to be consumers, therefore, it will often be very easy to find APIs using a web application as an end-user
    * the goal here is to find APIs to attack and this can be accomplished by discovering the API itself or the API documentation
    * if you can find the target's API and documentation as an end-user then mission accomplished, you have successfully discovered an API
* another way to find an API provided by a target is to look around the target's landing page
    * look through a landing page for links to API or development portal * when searching for APIs there are several signs that will indicate that you have discovered the existence of a web API
    * look out for obvious URL naming schemes:

        ```text
            https://target-name.com/api/v1 
            https://api.target-name.com/v1 
            https://target-name.com/docs
            https://dev.target-name.com/rest
        ```

    * look for API indicators within directory names, say

        ```text
            /api
            /api/v1
            /v1
            /v2
            /v3
            /rest
            /swagger
            /swagger.json
            /doc
            /docs
            /graphql
            /graphiql
            /altair
            /playground
            /staging
        ```

    * also, subdomains can also be indicators of web APIs:

        ```text
            api.target-name.com
            uat.target-name.com
            dev.target-name.com
            developer.target-name.com
            test.target-name.com
        ```

    * another indicator of web APIs is the HTTP request and response headers
        - the use of JSON or XML can be a good indicator that you have discovered an API
        - HTTP Request and Response Headers containing `Content-Type: application/json`, `application/xml` etc
    * watch for HTTP Responses that include statements, say

        ```text
            {"message": "Missing Authorisation token"}
        ```

    * another obvious indicators of an API would be through information gathered using 3<sup>rd</sup> party sources like github and API directories

        ```text
            Gitub: https://github.com/ 
            Postman Explore: https://www.postman.com/explore/apis
            ProgrammableWeb API Directory: https://www.programmableweb.com/apis/directory 
            APIs Guru: https://apis.guru/ 
            Public APIs Github Project: https://github.com/public-apis/public-apis 
            RapidAPI Hub: https://rapidapi.com/search/
        ```

* when searching for a target's APIs, use said target's web application as it was designed
    - use a browser go to the web application and see if an API is advertised
    - once you have an idea of how the web app functions, dig deeper by deploying passive and active reconnaissance techniques