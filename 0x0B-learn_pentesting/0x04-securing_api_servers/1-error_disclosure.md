# error disclosure
* error handling from a security perspective
* occurs when there is TMI in the error message(s)
    - error messages reveal technology and code
    - anything sent to a browser that a malicious actor can use to better understand your system in order to attack it 
* as a developer, you want to error out early; that is alright. the idea is to have sepreate error messages for developers and customers
    - devs and customers are different audiences
    - devs need to know what is not working so they can fix it
    - customers only need know that something atypical occurred; no details
* example: the following errror message to a customer

    ```java
        --snip---
        : {
            message: "Validation  failed",
            details: 'org.springframework.validation.BeanPropertyBindingResult: 1 errors\n'
            ---snip---
        }
        ---snip---
    ```

    - we now know that the API uses the spring framework (java programming language); we can narrow our search for vulnerabilities to spring-specific ones
* keep in mind that attackers do not respect UI rules; they would not be very good bad actors if they did, now, would they?
### how does error disclosure occur?
* through `try` blocks, mostly

    ```python
        def handle_error(e):
            print(e)

        def risky_code():
            return 1 / 0

        try:
            risky_code()
        except error as e:
            handle_error(e)
        else:
            do_this_if_no_error()
        finally:
            do_this_if_no_matter_what()
    ```

    ```javascript

        const risky_code = () => {
            return 1 / 0
        }

        try{
            risky_code()
        } catch(e) {
            console.info(e.message)
        }
    ```

* your error message(s) may make it to the [CVE website][def]
    - that, by itself, is a good thing, however, the reasons are not
### how is error disclosure used maliciously?
* ***something went wrong***
    - an error message is sent to login page &rarr; something went wrong
    - API provides a generic error message
    - we do not tell the user what went wrong: email, password etc; all we do is tell said user that ***"something went wrong"***
    - malicious actors cannot use our own info against us

    ```javascript
        ---snip---
        } response {
            requestId = 'None',
            requestTime = '2024-08-25T11:31:31.274+0300',
            errors: true,
            messages: [{type: 'ERROR', key: '', value: 'check the email id'}],
            data: false,
            totalPages: 0,
            totalElements: 0
        }
        ---snip---
    ```

* brand approach
    - example: github's 404 page
    <img src="[def2]", alt="github-404-page"/>
    - this page is shown, even when the page exists, to those that do not have access/authorisation to the page
### best practices

    |do|don't|
    |:---:|:---:|
    |error early|by-pass errors|
    |include useful info for devs in an error|expose dev info to customers|
    |log the error|provide TMI to the UI|
    |display something specifically crafted for customers on the error message||


[def]: https://www.cve.org/
[def2]: /gh_404.jpe