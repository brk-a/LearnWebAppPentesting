# Target Scope And Spidering

* idea is to see how to add a target into scope and _\[finally\]_ spidering it
* assumption: [black box pentest](https://resources.infosecinstitute.com/topic/what-are-black-box-grey-box-and-white-box-penetration-testing/)
* punching bag: [Mutillidae](https://owasp.org/www-project-mutillidae-ii/) on Metasploitable 2
* spidering is the first, and most important, step of web app pen testing
    * it is a form of footprinting; crawls through all the files of the web app/site, examines them, logs them and represents them in a way you, the pentester, understands
    * spidering gives you perspective of the web app/site


### how to add tsrget to scope and spider it
* fire up `Mutillidae`
* set up proxy manually as usual (feel free to use [Foxy Proxy](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=&cad=rja&uact=8&ved=2ahUKEwjqnuGEiNT-AhWKSvEDHXvlAKMQFnoECA4QAQ&url=https%3A%2F%2Faddons.mozilla.org%2Fen-US%2Ffirefox%2Faddon%2Ffoxyproxy-standard%2F&usg=AOvVaw0HuDFLTvpc6o0XuL0zvvX9) if you wish)
* fire up Burp
* turn off intercept mode
* reload `Mutillidae`; it, the IP address of the host it is running on and other relevant data should be listed in Burp under `Site Map` (`Site Map` is under `Target`)
    * a site map is the structure of a web page. it shows what the files that make the web page are and how they work together
* under `Site Map`, select `mutillidae`, right click and click `Add to Scope`. click `Yes` when asked whether to log out-of-scope `Proxy` traffic
    * scope allows automated spidering; that is, focus on the target and the target only not the reference links _et al_
* right click on `mutillidae` and click `Spider this branch`
    * now, we are spidering. click `Ignore` on the modals that show up. almost all are username-password related; Burp is, simply, testing default creds
    * in case this is a [white box pentest](https://resources.infosecinstitute.com/topic/what-are-black-box-grey-box-and-white-box-penetration-testing/), feel free to enter any details you might have
    * to view the status of the operation, go to `Control` under `Spider`. the stats there will help
    * if, for one reason or another, you must put in the username and password combinations, do this:
        1. scroll to  the `Application Login` section of `Options` (which is next to the `Control` tab above)
        2. notice that the option selected is `Prompt for guidance`; change that to `Automatically submit these credentials`. you are free to type in any creds you with in the `Username` and `Password` input fields. SQL injection strings are, usually, the best bet; more on SQL injection later. pause the spider operation, put the string below in the `Username` field and leave the `Password` field blank then resume spidering
        
        ~~~sql
        admin' or 1=1--
        ~~~

* click on the `mutillidae` directory
    * voila! the file structure of the webapp is right there
    * feel free to inspect every file listed; this is how you get into the mind of the builder/designer etc of the webapp/site
* there is a bar/button right above the `Site Map` window; says _Filter: Hiding not found items: hiding CSS..._. click it
    * there is a section in the modal that comes up called _Filter by request type_; it is on the top left
    * in that section, click the `Show only in-scope items` checkbox
    * click the bar again; you have filtered unnecessary links