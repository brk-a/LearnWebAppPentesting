# XSS: vulnerable query params

#### what the code does
* `QueryParamsDemo` renders a page based on _query params_
* it calls `useQuery` which, in turn, calls `useLocation()`

#### what TF is a query param?
* consider this:

        ```
        https://www.example.com/login?username=admin&password=password
        ```
        
pay attention to the part after the question mark `?` (said question mark tells the browser
to expect query params, by the way). notice a pattern `key=value` `&` `key=value` etc. the
keys in said key-value pairs are the query params

#### the vulnerability
* XSS
* XSS -> an attacker executes code using the victim's browser

#### why it is vulnerable
* there is this thing called _javascript protocol_
* consider the following url:

        ```
        javascript://_your-example-here_
        ```
* anything after `javascript://` is interpreted (by the browser) as JS code (think  `<script>...</script>`) and will be executed in the browser
* example

        ```
        javascript://doSomethingBad()
        ```

* the browser will call the function `doSomethingBad()`; see the slippery slope yet?
* our example takes the `redirect` query param and navigates to the value of said param; anything can be the value of the query param. example

        ```
        https://www.example.com/login?redirect=javascript://doSomethingBad()
        ```

* the user will be redirected to whatever `doSomethingBad()` does and/or returns

#### what now?
* eaa...sy! sanitise the url
* create a `validateURL()` function; has a param `url`, the url to sanitise
* fn checks if `protocol` is `https:`; `https:` is alright, the rest are not
    * if `protocol` is `https` return `url` else return `/`
* call the fn in the `href` prop of the `<a>` tag in `QueryParamsDemo` and pass `query.get("redirect")` to the fn
* job done